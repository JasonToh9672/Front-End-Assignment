<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Food Explorer - Discover Amazing Street Foods</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">

    <style>
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23ff6b35" width="1200" height="600"/><circle fill="%23f7931e" cx="200" cy="150" r="80"/><circle fill="%23f7931e" cx="1000" cy="450" r="100"/><rect fill="%23ffffff" opacity="0.1" x="0" y="0" width="1200" height="600"/></svg>');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            opacity: 0.8;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
        }

        .search-container {
            max-width: 600px;
            margin: 2rem auto;
            position: relative;
        }

        .search-input {
            padding: 15px 60px 15px 20px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 5px;
            bottom: 5px;
            border: none;
            background: var(--accent-color);
            color: white;
            border-radius: 50px;
            padding: 0 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #27ae60;
            transform: scale(1.05);
        }

        /* Search suggestions styling */
        .search-suggestions {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
        }

        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background-color: #f8f9fa !important;
        }

        .suggestion-item i {
            color: var(--primary-color);
        }

        /* Popular Foods Section */
        .popular-foods {
            padding: 80px 0;
            background: var(--light-color);
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--dark-color);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .food-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 30px;
            height: 100%;
        }

        .food-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .food-image {
            width: 100%;
            height: 200px;
            position: relative;
            overflow: hidden;
            background: #f2f2f2;
        }

        .food-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .food-content {
            padding: 20px;
        }

        .food-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .food-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .food-rating {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .stars {
            color: var(--secondary-color);
            margin-right: 10px;
        }

        .btn-custom {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
        }

        .btn-custom:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        /* Features Section */
        .features {
            padding: 80px 0;
            background: white;
        }

        .feature-card {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            background: var(--light-color);
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        /* Footer */
        .footer {
            background: var(--dark-color);
            color: white;
            padding: 50px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h4 {
            margin-bottom: 20px;
            color: var(--secondary-color);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: #bdc3c7;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: var(--secondary-color);
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .footer-bottom {
            border-top: 1px solid #34495e;
            padding-top: 20px;
            text-align: center;
            color: #bdc3c7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .search-container {
                margin: 1rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Modal styles */
        .modal-content {
            border: none;
            border-radius: 15px;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px 15px 0 0;
        }

        .welcome-message {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--accent-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .welcome-message.show {
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="fas fa-utensils"></i> Street Food Explorer
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="malaysia.html">Malaysian Food</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="global.html">Global Food</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="map.html">Food Map</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="gallery.html">Gallery</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Welcome Message -->
    <div id="welcomeMessage" class="welcome-message">
        <i class="fas fa-hand-wave"></i> Welcome back!
        <button type="button" class="btn-close btn-close-white ms-2" aria-label="Close"
            onclick="hideWelcome()"></button>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container">
            <div class="hero-content animate__animated animate__fadeInDown">
                <h1 class="display-3 fw-bold">Discover Amazing Street Foods</h1>
                <p class="lead">Explore the world's most delicious street food culture, from local Malaysian delights to
                    global culinary adventures</p>

                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Search for street food or locations...">
                    <button class="search-btn" onclick="performSearch()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <div class="mt-4">
                    <a href="malaysia.html"
                        class="btn btn-custom btn-lg me-3 animate__animated animate__pulse animate__infinite">
                        <i class="fas fa-map-marker-alt"></i> Explore Malaysian Food
                    </a>
                    <a href="global.html" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-globe"></i> Global Street Food
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Popular Foods Section -->
    <section class="popular-foods">
        <div class="container" id="showresult">
            <h2 class="section-title animate__animated animate__fadeInUp">Popular Street Foods</h2>
            <div class="row" id="popularFoodsContainer">
                <!-- Popular foods will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <h2 class="section-title animate__animated animate__fadeInUp">Why Choose Street Food Explorer?</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="feature-card animate__animated animate__fadeInLeft">
                        <div class="feature-icon">
                            <i class="fas fa-globe-asia"></i>
                        </div>
                        <h3 class="feature-title">Global Coverage</h3>
                        <p>Discover street foods from Malaysia and around the world with detailed information and
                            cultural insights.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card animate__animated animate__fadeInUp">
                        <div class="feature-icon">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <h3 class="feature-title">Interactive Maps</h3>
                        <p>Find street food stalls near you with our interactive map feature and GPS integration.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card animate__animated animate__fadeInRight">
                        <div class="feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="feature-title">Save Favorites</h3>
                        <p>Create your personal collection of favorite street foods and share them with friends.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-utensils"></i> Street Food Explorer</h4>
                    <p>Your ultimate guide to discovering the world's most amazing street foods. From local Malaysian
                        favorites to global culinary treasures.</p>
                    <div class="social-links mt-3">
                        <a href="https://web.facebook.com/StreetFoodExplorer9672/" title="Facebook"><i
                                class="fab fa-facebook"></i></a>
                        <a href="https://x.com/Street_Food9672" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.instagram.com/street_food_explorer9672/" title="Instagram"><i
                                class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="malaysia.html">Malaysian Street Food</a></li>
                        <li><a href="global.html">Global Street Food</a></li>
                        <li><a href="map.html">Food Map</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="gallery.html">Photo Gallery</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a></li>
                        <li><a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <p><i class="fas fa-envelope"></i> info@streetfoodexplorer.com</p>
                    <p><i class="fas fa-phone"></i> +60 12-345-6789</p>
                    <p><i class="fas fa-map-marker-alt"></i> Kuala Lumpur, Malaysia</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Street Food Explorer. All rights reserved. | Developed by UCCD2323 Group Project</p>
            </div>
        </div>
    </footer>

    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Data Collection</h6>
                    <p>We collect information to provide better services to our users. This includes search preferences,
                        favorite foods, and location data when you use our map features.</p>

                    <h6>Use of Cookies</h6>
                    <p>We use cookies and local storage to enhance your browsing experience, remember your preferences,
                        and provide personalized content.</p>

                    <h6>Data Security</h6>
                    <p>We implement appropriate security measures to protect your personal information against
                        unauthorized access, alteration, disclosure, or destruction.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Terms of Service</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Website Usage</h6>
                    <p>By using Street Food Explorer, you agree to use the site responsibly and not engage in any
                        activities that could harm the site or other users.</p>

                    <h6>Content Guidelines</h6>
                    <p>All user-generated content must be respectful and relevant to street food culture. We reserve the
                        right to remove inappropriate content.</p>

                    <h6>Liability</h6>
                    <p>Street Food Explorer provides information for educational and entertainment purposes. We are not
                        responsible for any food-related incidents or experiences.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
        // Global variables
        let lastSearch = '';
        let visitCount = 0;
        let favoritesList = [];
        let userPreferences = {};

        // Popular foods data
        const popularFoods = [
            {
                id: 1,
                name: "Nasi Lemak",
                description: "Fragrant coconut rice served with sambal, fried anchovies, peanuts, cucumber, and boiled egg. Malaysia's beloved national dish.",
                rating: 4.9,
                country: "Malaysia",
                image: "images/malaysia/nasi lemak.jpg",
                category: "rice"
            },
            {
                id: 2,
                name: "Char Kway Teow",
                description: "Stir-fried flat rice noodles with prawns, Chinese sausage, eggs, bean sprouts, and chives in dark soy sauce.",
                rating: 4.8,
                country: "Penang",
                image: "images/malaysia/char kway teow.jpg",
                category: "noodles"
            },
            {
                id: 3,
                name: "Roti Canai",
                description: "Flaky and crispy flatbread served with dhal curry or meat curry. Popular breakfast dish in Malaysia.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/roti canai.jpg",
                category: "bread"
            },
            {
                id: 4,
                name: "Satay",
                description: "Skewered and grilled meat served with peanut sauce, rice cakes, and cucumber.",
                rating: 4.9,
                country: "Kajang",
                image: "images/malaysia/satay.jpg",
                category: "meat"
            },
            {
                id: 5,
                name: "Laksa",
                description: "Spicy noodle soup with coconut milk or tamarind base, often served with prawns, chicken, or fish.",
                rating: 4.8,
                country: "Penang/Sarawak",
                image: "images/malaysia/laksa.jpg",
                category: "noodles"
            },
            {
                id: 6,
                name: "Hainanese Chicken Rice",
                description: "Steamed or roasted chicken served with fragrant rice cooked in chicken stock, and chili sauce.",
                rating: 4.7,
                country: "Hainan/Ipoh",
                image: "images/malaysia/hainanese chicken rice.jpg",
                category: "rice"
            },
            {
                id: 7,
                name: "Mee Goreng Mamak",
                description: "Spicy fried noodles with tofu, potatoes, eggs, vegetables, and squid.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/mee goreng mamak.webp",
                category: "noodles"
            },
            {
                id: 8,
                name: "Teh Tarik",
                description: "Malaysia's national drink. Pulled milk tea with frothy top.",
                rating: 4.9,
                country: "Malaysia",
                image: "images/malaysia/teh tarik.jpg",
                category: "drink"
            },
            {
                id: 9,
                name: "Cendol",
                description: "Shaved ice dessert with green rice flour jelly, coconut milk, palm sugar syrup, and red beans.",
                rating: 4.8,
                country: "Malaysia",
                image: "images/malaysia/cendol.jpg",
                category: "dessert"
            },
            {
                id: 10,
                name: "ABC (Ais Kacang)",
                description: "Shaved ice dessert topped with red beans, sweet corn, grass jelly, syrup, and condensed milk.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/abc.jpg",
                category: "dessert"
            },
            {
                id: 11,
                name: "Nasi Kandar",
                description: "Rice served with various curries and side dishes, originating from Penang.",
                rating: 4.6,
                country: "Penang",
                image: "images/malaysia/nasi kandar.jpg",
                category: "rice"
            },
            {
                id: 12,
                name: "Banana Leaf Rice",
                description: "South Indian-inspired dish of rice served on a banana leaf with vegetables, curries, and papadum.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/banana leaf rice.jpg",
                category: "rice"
            },
            {
                id: 13,
                name: "Kaya Toast",
                description: "Toasted bread with coconut egg jam (kaya) and butter, served with half-boiled eggs.",
                rating: 4.5,
                country: "Malaysia/Singapore",
                image: "images/malaysia/kaya toast.jpg",
                category: "snack"
            },
            {
                id: 14,
                name: "Rendang",
                description: "Slow-cooked dry curry dish made with beef, coconut milk, and spices.",
                rating: 4.9,
                country: "Minangkabau/Malaysia",
                image: "images/malaysia/rendang.jpg",
                category: "meat"
            },
            {
                id: 15,
                name: "Kuih Lapis",
                description: "Colorful layered steamed rice flour and coconut milk cake.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/kuih lapis.jpg",
                category: "dessert"
            },
            {
                id: 16,
                name: "Otak-Otak",
                description: "Grilled fish cake made of ground fish meat mixed with spices and wrapped in banana leaves.",
                rating: 4.5,
                country: "Muar, Johor",
                image: "images/malaysia/otak otak.jpg",
                category: "seafood"
            },
            {
                id: 17,
                name: "Ikan Bakar",
                description: "Grilled fish marinated with spices and served with sambal.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/ikan bakar.jpg",
                category: "seafood"
            },
            {
                id: 18,
                name: "Keropok Lekor",
                description: "Traditional fish crackers from Terengganu, deep-fried and crispy.",
                rating: 4.6,
                country: "Terengganu",
                image: "images/malaysia/keropok lekor.jpg",
                category: "snack"
            },
            {
                id: 19,
                name: "Mee Rebus",
                description: "Yellow noodles served in a thick, spicy-sweet gravy made of potatoes, curry, and shrimp paste.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/mee rebus.jpg",
                category: "noodles"
            },
            {
                id: 20,
                name: "Nasi Dagang",
                description: "Fragrant rice steamed in coconut milk, served with fish curry and pickles.",
                rating: 4.7,
                country: "Terengganu/Kelantan",
                image: "images/malaysia/nasi dagang.jpg",
                category: "rice"
            },
            {
                id: 21,
                name: "Pulut Panggang",
                description: "Glutinous rice grilled in banana leaf, often filled with spicy coconut.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/pulut panggang.jpg",
                category: "snack"
            },
            {
                id: 22,
                name: "Char Siew Rice",
                description: "Rice served with barbecued pork (char siew), cucumber, and sweet soy sauce.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/char siew rice.jpg",
                category: "rice"
            },
            {
                id: 23,
                name: "Hokkien Mee",
                description: "Dark soy sauce fried noodles with pork lard, prawns, and cabbage.",
                rating: 4.5,
                country: "Kuala Lumpur",
                image: "images/malaysia/hokkien mee.jpg",
                category: "noodles"
            },
            {
                id: 24,
                name: "Claypot Rice",
                description: "Rice cooked in claypot with Chinese sausage, chicken, and salted fish.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/claypot rice.jpg",
                category: "rice"
            },
            {
                id: 25,
                name: "Roti Jala",
                description: "Net-like crepe served with chicken or beef curry.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/roti jala.jpg",
                category: "bread"
            },
            {
                id: 26,
                name: "Rojak",
                description: "Fruit and vegetable salad mixed with a thick, spicy peanut and shrimp paste sauce.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/rojak.jpg",
                category: "snacks"
            },
            {
                id: 27,
                name: "Kuih Seri Muka",
                description: "Two-layered dessert with glutinous rice bottom and pandan custard top.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/kuih seri muka.jpg",
                category: "dessert"
            },
            {
                id: 28,
                name: "Apam Balik",
                description: "Thick or thin pancake filled with peanuts, corn, and sugar.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/apam balik.jpg",
                category: "dessert"
            },
            {
                id: 29,
                name: "Murtabak",
                description: "Stuffed pan-fried bread with minced meat, onions, and egg.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/murtabak.jpg",
                category: "bread"
            },
            {
                id: 30,
                name: "Nasi Kerabu",
                description: "Blue-colored rice served with fried fish or chicken, salted egg, and local herbs.",
                rating: 4.8,
                country: "Kelantan",
                image: "images/malaysia/nasi kerabu.jpg",
                category: "rice"
            },
            {
                id: 31,
                name: "Nasi Ulam",
                description: "Herbed rice salad mixed with local spices, herbs, and dried fish.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/nasi ulam.jpg",
                category: "rice"
            },
            {
                id: 32,
                name: "Pisang Goreng",
                description: "Deep-fried banana fritters, crispy on the outside and soft inside.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/pisang goreng.jpg",
                category: "snack"
            },
            {
                id: 33,
                name: "Mee Siam",
                description: "Rice vermicelli noodles served with spicy, tangy gravy.",
                rating: 4.5,
                country: "Malaysia/Singapore",
                image: "images/malaysia/mee siam.avif",
                category: "noodles"
            },
            {
                id: 34,
                name: "Roti Tisu",
                description: "Extra thin, crispy flatbread shaped like a tall cone, often drizzled with sugar and condensed milk.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/roti tisu.jpg",
                category: "bread"
            },
            {
                id: 35,
                name: "Kuih Ketayap",
                description: "Green crepe filled with grated coconut sweetened with palm sugar.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/kuih ketayap.jpeg",
                category: "dessert"
            },
            {
                id: 36,
                name: "Soto Ayam",
                description: "Spiced chicken soup with rice cakes, vermicelli, and bean sprouts.",
                rating: 4.6,
                country: "Malaysia/Indonesia",
                image: "images/malaysia/soto ayam.jpg",
                category: "soup"
            },
            {
                id: 37,
                name: "Kuih Bahulu",
                description: "Small sponge cakes baked in traditional molds, usually served during festive seasons.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/kuih bahulu.jpeg",
                category: "dessert"
            },
            {
                id: 38,
                name: "Maggi Goreng",
                description: "Instant noodles stir-fried with egg, vegetables, and sometimes meat or seafood.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/maggi goreng.jpg",
                category: "noodles"
            },
            {
                id: 39,
                name: "Kuih Karipap",
                description: "Deep-fried pastry filled with curried potatoes, chicken, or sardines.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/kuih karipap.jpg",
                category: "snack"
            },
            {
                id: 40,
                name: "Lemang",
                description: "Glutinous rice cooked in bamboo with coconut milk, traditionally eaten during Hari Raya.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/lemang.png",
                category: "rice"
            },
            {
                id: 41,
                name: "Mee Bandung",
                description: "Noodles in a rich tomato-based gravy with beef, prawns, and egg.",
                rating: 4.5,
                country: "Muar, Johor",
                image: "images/malaysia/mee bandung.jpg",
                category: "noodles"
            },
            {
                id: 42,
                name: "Kuih Dodol",
                description: "Sticky toffee-like sweet made of coconut milk, palm sugar, and glutinous rice flour.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/kuih dodol.jpg",
                category: "dessert"
            },
            {
                id: 43,
                name: "Mee Kolok",
                description: "Dry-tossed noodles with soy sauce, shallot oil, and beef or chicken.",
                rating: 4.7,
                country: "Sarawak",
                image: "images/malaysia/mee kolok.jpg",
                category: "noodles"
            },
            {
                id: 44,
                name: "Nasi Lemuni",
                description: "Rice cooked with lemuni leaves, believed to have health benefits, served with side dishes.",
                rating: 4.4,
                country: "Kedah",
                image: "images/malaysia/nasi lemuni.jpg",
                category: "rice"
            },
            {
                id: 45,
                name: "Lontong",
                description: "Compressed rice cakes in coconut milk-based vegetable stew.",
                rating: 4.5,
                country: "Malaysia/Indonesia",
                image: "images/malaysia/lontong.jpg",
                category: "rice"
            },
            {
                id: 46,
                name: "Popiah",
                description: "Fresh spring rolls filled with jicama, carrots, lettuce, and sometimes egg or prawns.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/popiah.jpg",
                category: "snack"
            },
            {
                id: 47,
                name: "Nasi Tumpang",
                description: "Cone-shaped rice wrapped in banana leaf with layers of dishes such as curry, fried egg, and serunding.",
                rating: 4.5,
                country: "Kelantan",
                image: "images/malaysia/nasi tumpang.jpg",
                category: "rice"
            },
            {
                id: 48,
                name: "Kuih Onde-Onde",
                description: "Soft, chewy dough balls filled with sweet Gula Melaka (palm sugar) and infused with the fragrant flavor of pandan.",
                rating: 4.7,
                country: "Malaysia",
                image: "images/malaysia/kuih onde onde.jpg",
                category: "dessert"
            },
            {
                id: 49,
                name: "Sup Kambing",
                description: "Spiced mutton soup cooked with herbs, potatoes, and carrots.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/sup kambing.jpg",
                category: "soup"
            },
            {
                id: 50,
                name: "Mee Soto",
                description: "Noodles in a flavorful spiced chicken broth, served with shredded chicken and bean sprouts.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/mee soto.jpg",
                category: "noodles"
            },
            {
                id: 51,
                name: "Ayam Percik",
                description: "Grilled chicken marinated in spiced coconut sauce, popular during Ramadan bazaars.",
                rating: 4.7,
                country: "Kelantan",
                image: "images/malaysia/ayam percik.jpg",
                category: "meat"
            },
            {
                id: 52,
                name: "Kuih Tepung Pelita",
                description: "Two-layer coconut milk dessert steamed in banana leaf containers.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/kuih tepung pelita.jpg",
                category: "dessert"
            },
            {
                id: 53,
                name: "Mee Kari",
                description: "Curry noodles served with chicken, tofu puffs, cockles, and bean sprouts.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/mee kari.jpeg",
                category: "noodles"
            },
            {
                id: 54,
                name: "Pulut Inti",
                description: "Glutinous rice topped with sweetened grated coconut wrapped in banana leaf.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/pulut inti.jpg",
                category: "snack"
            },
            {
                id: 55,
                name: "Kaya Puff",
                description: "Flaky pastry filled with coconut egg jam (kaya).",
                rating: 4.4,
                country: "Malaysia",
                image: "images/malaysia/kaya puff.jpg",
                category: "dessert"
            },
            {
                id: 56,
                name: "Mee Jawa",
                description: "Yellow noodles served with sweet-spicy gravy, potatoes, bean sprouts, and fried shallots.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/mee jawa.jpg",
                category: "noodles"
            },
            {
                id: 57,
                name: "Pulut Durian",
                description: "Glutinous rice served with fresh durian and coconut milk.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/pulut durian.jpg",
                category: "dessert"
            },
            {
                id: 58,
                name: "Nasi Ayam Penyet",
                description: "Indonesian-style smashed fried chicken served with sambal and rice.",
                rating: 4.6,
                country: "Malaysia/Indonesia",
                image: "images/malaysia/nasi ayam penyet.jpeg",
                category: "rice"
            },
            {
                id: 59,
                name: "Kuih Cucur Badak",
                description: "Deep-fried sweet potato dough filled with spicy coconut filling.",
                rating: 4.4,
                country: "Malaysia",
                image: "images/malaysia/kuih cucur badak.jpg",
                category: "snack"
            },
            {
                id: 60,
                name: "Asam Pedas",
                description: "Spicy and sour fish stew with tamarind, chili, and spices.",
                rating: 4.7,
                country: "Melaka/Johor",
                image: "images/malaysia/asam pedas.jpg",
                category: "seafood"
            },
            {
                id: 61,
                name: "Kuih Keria",
                description: "Sweet potato doughnuts glazed with palm sugar syrup.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/kuih keria.jpg",
                category: "dessert"
            },
            {
                id: 62,
                name: "Putu Mayam",
                description: "Rice flour noodles served with grated coconut and brown sugar.",
                rating: 4.5,
                country: "Malaysia",
                image: "images/malaysia/putu mayam.jpg",
                category: "dessert"
            },
            {
                id: 63,
                name: "Roti John",
                description: "Omelette sandwich with minced meat, onions, and sauces.",
                rating: 4.6,
                country: "Malaysia",
                image: "images/malaysia/roti john.webp",
                category: "bread"
            },
            {
                id: 64,
                name: "Keropok Lekor",
                description: "Traditional fish crackers from Terengganu, deep-fried and crispy.",
                rating: 4.6,
                country: "Terengganu",
                image: "images/malaysia/keropok lekor.jpg",
                category: "snack"
            },
            {
                id: 65,
                name: "Bak Kut Teh",
                description: "A fragrant herbal soup made with pork ribs, garlic, and Chinese herbs, served with rice or fried dough sticks.",
                rating: 4.7,
                country: "Klang",
                image: "images/malaysia/bak kut teh.jpg",
                category: "Rice dishes"
            },
            {
                id: 66,
                name: "Milo Dinosaur",
                description: "Iced Milo topped with a generous heap of undissolved Milo powder, creating a rich and chocolatey treat.",
                rating: 4.8,
                country: "Malaysia",
                image: "images/malaysia/milo dinosaur.jpg",
                category: "Drinks"
            },
            {
                id: 67,
                name: "Takoyaki",
                description: "Crispy-outside, gooey-inside octopus balls drizzled with sauce and bonito flakes.",
                rating: 4.7,
                country: "Japan",
                image: "images/Takoyaki.webp",
                category: "Snacks"
            },
            {
                id: 68,
                name: "Ramen",
                description: "Wheat noodles in rich broth topped with chashu, egg, and scallions.",
                rating: 4.8,
                country: "Japan",
                image: "images/Ramen_Bowl.webp",
                category: "Noodles"
            },
            {
                id: 69,
                name: "Matcha Ice Cream",
                description: "Creamy ice cream flavored with Japanese matcha green tea.",
                rating: 4.3,
                country: "Japan",
                image: "images/matcha_ice.jpg",
                category: "Desserts"
            },
            {
                id: 70,
                name: "Dango",
                description: "Skewered rice dumplings, often served with sweet sauces or coatings.",
                rating: 4.5,
                country: "Japan",
                image: "images/dango.jpg",
                category: "Desserts"
            },
            {
                id: 71,
                name: "Pad Thai",
                description: "Stir-fried rice noodles with tamarind, shrimp, tofu, egg, and peanuts.",
                rating: 4.7,
                country: "Thailand",
                image: "images/Pad_Thai.jpg",
                category: "Noodles"
            },
            {
                id: 72,
                name: "Mango Sticky Rice",
                description: "Sweet sticky rice with ripe mango and coconut cream.",
                rating: 4.6,
                country: "Thailand",
                image: "images/mango_rice.webp",
                category: "Desserts"
            },
            {
                id: 73,
                name: "Thai Iced Tea",
                description: "Sweet and creamy iced tea made with strong brewed black tea, sugar, and condensed milk.",
                rating: 4.5,
                country: "Thailand",
                image: "images/thai_tea.jpg",
                category: "Drinks"
            },
            {
                id: 74,
                name: "Thai Green Curry Rice",
                description: "Spicy and aromatic green curry served with steamed rice.",
                rating: 4.8,
                country: "Thailand",
                image: "images/green_curry.jpg",
                category: "Rice"
            },
            {
                id: 75,
                name: "Tacos al Pastor",
                description: "Marinated pork shaved from a spit, served on corn tortillas with pineapple.",
                rating: 4.8,
                country: "Mexico",
                image: "images/tacos.webp",
                category: "Snacks"
            },
            {
                id: 76,
                name: "Elote",
                description: "Grilled corn slathered with mayo, cheese, chili, and lime.",
                rating: 4.5,
                country: "Mexico",
                image: "images/elote.jpg",
                category: "Snacks"
            },
            {
                id: 77,
                name: "Margarita",
                description: "Classic tequila-based cocktail mixed with lime juice and orange liqueur, served with a salted rim.",
                rating: 4.4,
                country: "Mexico",
                image: "images/margarita.webp",
                category: "Drinks"
            },
            {
                id: 78,
                name: "Churros",
                description: "Fried dough pastry coated in sugar, often served with chocolate or caramel dipping sauce.",
                rating: 4.6,
                country: "Mexico",
                image: "images/churros.jpg",
                category: "Desserts"
            },
            {
                id: 79,
                name: "Dner Kebab",
                description: "Thinly sliced seasoned meat in flatbread with veggies and sauce.",
                rating: 4.6,
                country: "Turkey",
                image: "images/Doner_kebab.jpg",
                category: "Snacks"
            },
            {
                id: 80,
                name: "Kumpir",
                description: "Loaded baked potato with butter, cheese, and endless toppings.",
                rating: 4.4,
                country: "Turkey",
                image: "images/kumpir.webp",
                category: "Snacks"
            },
            {
                id: 81,
                name: "Knefe",
                description: "Warm dessert made with shredded phyllo dough and melted cheese, soaked in sweet sugar syrup.",
                rating: 4.5,
                country: "Turkey",
                image: "images/kunefe.jpg",
                category: "Desserts"
            },
            {
                id: 82,
                name: "ay",
                description: "Strong black tea traditionally brewed in a double teapot, served hot in small tulip-shaped glasses.",
                rating: 4.3,
                country: "Turkey",
                image: "images/cay.jpg",
                category: "Drinks"
            },
            {
                id: 83,
                name: "Pani Puri",
                description: "Crispy puri shells filled with spiced potatoes and tangy tamarind water.",
                rating: 4.7,
                country: "India",
                image: "images/pani_puri.jpg",
                category: "Snacks"
            },
            {
                id: 84,
                name: "Masala Dosa",
                description: "Crisp rice-lentil crepe filled with spiced potatoes; served with chutneys.",
                rating: 4.6,
                country: "India",
                image: "images/masala.jpg",
                category: "Rice"
            },
            {
                id: 85,
                name: "Masala Chai",
                description: "Spiced tea brewed with black tea, milk, sugar, and a blend of aromatic spices.",
                rating: 4.6,
                country: "India",
                image: "images/masala_chai.jpg",
                category: "Drinks"
            },
            {
                id: 86,
                name: "Lassi",
                description: "Refreshing yogurt-based drink, can be sweet or salty, often flavored with fruits or spices.",
                rating: 4.6,
                country: "India",
                image: "images/lassi.jpg",
                category: "Drinks"
            },
            {
                id: 87,
                name: "Bnh M",
                description: "Crispy baguette with pickles, herbs, pt, and meats.",
                rating: 4.7,
                country: "Vietnam",
                image: "images/banh_mi.jpg",
                category: "Snacks"
            },
            {
                id: 88,
                name: "Ph",
                description: "Aromatic beef or chicken noodle soup with fresh herbs.",
                rating: 4.6,
                country: "Vietnam",
                image: "images/pho.jpg",
                category: "Noodles"
            },
            {
                id: 89,
                name: "C Ph Trng",
                description: "Rich Vietnamese coffee topped with a creamy, sweet egg yolk foam.",
                rating: 4.6,
                country: "Vietnam",
                image: "images/caphe.jpg",
                category: "Drinks"
            },
            {
                id: 90,
                name: "Ch Sng Sa Ht Lu",
                description: "Sweet Vietnamese dessert made with agar jelly, water chestnuts, and tapioca pearls in coconut milk.",
                rating: 4.6,
                country: "Vietnam",
                image: "images/chesuong.jpg",
                category: "Desserts"
            },
            {
                id: 91,
                name: "Tteokbokki",
                description: "Chewy rice cakes simmered in spicy gochujang sauce.",
                rating: 4.5,
                country: "South Korea",
                image: "images/tteobokki.jpg",
                category: "Snacks"
            },
            {
                id: 92,
                name: "Hotteok",
                description: "Brown sugarfilled griddled pancakes, crisp outside, gooey inside.",
                rating: 4.4,
                country: "South Korea",
                image: "images/hotteok.jpg",
                category: "Desserts"
            },
            {
                id: 93,
                name: "Kimchi Fried Rice",
                description: "Flavorful fried rice dish stir-fried with kimchi, vegetables, and sometimes meat or egg.",
                rating: 4.5,
                country: "South Korea",
                image: "images/kimchi_rice.jpg",
                category: "Rice"
            },
            {
                id: 94,
                name: "Banana Milk",
                description: "Sweet, creamy milk flavored with banana, typically sold in bottles or cartons.",
                rating: 4.7,
                country: "South Korea",
                image: "images/banana_milk.jpg",
                category: "Drinks"
            },
            {
                id: 95,
                name: "Nasi Goreng",
                description: "Smoky fried rice with kecap manis and toppings.",
                rating: 4.6,
                country: "Indonesia",
                image: "images/nasi_goreng.jpg",
                category: "Rice"
            },
            {
                id: 96,
                name: "Satay",
                description: "Skewered grilled meats with peanut sauce, Indonesian style.",
                rating: 4.6,
                country: "Indonesia",
                image: "images/satay.jpg",
                category: "Snacks"
            },
            {
                id: 97,
                name: "Kopi Luwak",
                description: "Rare and expensive coffee made from beans digested and excreted by civet cats, known for its smooth flavor.",
                rating: 4.6,
                country: "Indonesia",
                image: "images/kopi_luwak.jpg",
                category: "Drinks"
            },
            {
                id: 98,
                name: "Dadar Gulung",
                description: "Green pandan-flavored crepe roll filled with sweet coconut and palm sugar.",
                rating: 4.6,
                country: "Indonesia",
                image: "images/dadar_gulung.jpg",
                category: "Desserts"
            },
            {
                id: 99,
                name: "Jianbing",
                description: "Crispy egg crpe with sauces, herbs, and crunchy cracker.",
                rating: 4.4,
                country: "China",
                image: "images/jianbing.jpg",
                category: "Snacks"
            },
            {
                id: 100,
                name: "Xiao Long Bao",
                description: "Soup dumplings bursting with savory broth.",
                rating: 4.5,
                country: "China",
                image: "images/xiaolongbao.jpg",
                category: "Snacks"
            },
            {
                id: 101,
                name: "Peking Duck",
                description: "Crispy duck skin and rich flavor, traditionally enjoyed with thin pancakes and condiments.",
                rating: 4.8,
                country: "China",
                image: "images/peking_duck.jpg",
                category: "Snacks"
            },
            {
                id: 102,
                name: "Zha Jiang Mian",
                description: "Noodles topped with thick sauce made of fermented soybean paste and minced pork.",
                rating: 4.6,
                country: "China",
                image: "images/zhajiangmian.webp",
                category: "Noodles"
            },
            {
                id: 103,
                name: "Chilli Crab",
                description: "Sweetspicy crab in rich tomato-chili sauce; messy and glorious.",
                rating: 4.6,
                country: "Singapore",
                image: "images/chilli_crab.avif",
                category: "Snacks"
            },
            {
                id: 104,
                name: "Hainanese Chicken Rice",
                description: "Poached chicken with fragrant rice and chili-ginger sauce.",
                rating: 4.7,
                country: "Singapore",
                image: "images/hainan_chicken.jpg",
                category: "Rice"
            },
            {
                id: 105,
                name: "Xing Zhou Bee Hoon",
                description: "Stir-fried rice vermicelli with curry powder, vegetables, shrimp, and sometimes char siu or egg.",
                rating: 4.6,
                country: "Singapore",
                image: "images/xingzhou.jpg",
                category: "Noodles"
            },
            {
                id: 106,
                name: "Mee Siam",
                description: "Thin rice noodles in a tangy, spicy, and slightly sweet gravy, often served with tofu, egg, and shrimp.",
                rating: 4.5,
                country: "Singapore",
                image: "images/meesiam.avif",
                category: "Noodles"
            }

        ];

        // Initialize the website
        $(document).ready(function () {
            initializeStorage();
            loadPopularFoods();
            showWelcomeMessage();
            loadLastSearch();
            trackVisit();
            setupAnimations();
            loadUserPreferences();

            console.log('Street Food Explorer initialized successfully!');
        });

        // Storage Management Functions
        function initializeStorage() {
            if (!localStorage.getItem('streetFood_favorites')) {
                localStorage.setItem('streetFood_favorites', JSON.stringify([]));
            }

            if (!localStorage.getItem('streetFood_preferences')) {
                const defaultPrefs = {
                    theme: 'light',
                    language: 'en',
                    notifications: true,
                    favoriteCategories: []
                };
                localStorage.setItem('streetFood_preferences', JSON.stringify(defaultPrefs));
            }

            if (!sessionStorage.getItem('streetFood_session')) {
                const sessionData = {
                    startTime: new Date().toISOString(),
                    pageViews: [],
                    searchHistory: []
                };
                sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));
            }

            favoritesList = JSON.parse(localStorage.getItem('streetFood_favorites'));
            console.log('Storage initialized successfully');
        }

        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function trackVisit() {
            visitCount = parseInt(getCookie('streetFood_visits') || '0') + 1;
            setCookie('streetFood_visits', visitCount, 30);

            const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session'));
            sessionData.pageViews.push({
                page: 'home',
                timestamp: new Date().toISOString()
            });
            sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));

            console.log(`Visit #${visitCount} tracked`);
        }

        function showWelcomeMessage() {
            setTimeout(() => {
                const welcomeMsg = document.getElementById('welcomeMessage');
                if (visitCount > 1) {
                    welcomeMsg.querySelector('i').className = 'fas fa-smile';
                    welcomeMsg.innerHTML = `<i class="fas fa-smile"></i> Welcome back! Visit #${visitCount} <button type="button" class="btn-close btn-close-white ms-2" aria-label="Close" onclick="hideWelcome()"></button>`;
                }
                welcomeMsg.classList.add('show');

                setTimeout(() => {
                    welcomeMsg.classList.remove('show');
                }, 5000);
            }, 2000);
        }

        function hideWelcome() {
            document.getElementById('welcomeMessage').classList.remove('show');
        }

        //Search functionality
        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.trim();

            if (searchTerm) {
                localStorage.setItem('streetFood_lastSearch', searchTerm);

                const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session'));
                sessionData.searchHistory.push({
                    term: searchTerm,
                    timestamp: new Date().toISOString()
                });
                sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));

                showSearchResults(searchTerm);
                console.log(`Search performed: ${searchTerm}`);
            }
        }

        function showSearchResults(searchTerm) {
            const results = popularFoods.filter(food =>
                food.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                food.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                food.category.toLowerCase().includes(searchTerm.toLowerCase())
            );

            if (results.length > 0) {
                const container = document.getElementById('popularFoodsContainer');
                container.innerHTML = `<div class="col-12"><h4>Search Results for "${searchTerm}":</h4></div>`;

                results.forEach(food => {
                    const foodCard = createFoodCard(food);
                    container.innerHTML += foodCard;
                });
                document.getElementById("showresult").scrollIntoView({
                    behavior: "smooth",
                    block: "start"
                });
            } else {
                alert(`No results found for "${searchTerm}". Try searching for Malaysian foods like "nasi lemak" or "char kway teow"`);
            }
        }

        function loadLastSearch() {
            const lastSearch = localStorage.getItem('streetFood_lastSearch');
            if (lastSearch) {
                document.getElementById('searchInput').placeholder = `Last search: ${lastSearch}`;
            }
        }

        function hideSearchSuggestions() {
            const suggestions = document.querySelector('.search-suggestions');
            if (suggestions) {
                suggestions.remove();
            }
        }

        function selectSuggestion(suggestion) {
            document.getElementById('searchInput').value = suggestion;
            hideSearchSuggestions();
            performSearch();
        }

        // Food card creation and management
        function loadPopularFoods() {
    const container = document.getElementById('popularFoodsContainer');
    container.innerHTML = '';

    // Filter to only include foods with IDs 1-6
    const filteredFoods = popularFoods.filter(food => food.id >= 1 && food.id <= 6);
    
    filteredFoods.forEach(food => {
        const foodCard = createFoodCard(food);
        container.innerHTML += foodCard;
    });

    setTimeout(() => {
        $('.favorite-btn').on('click', function() {
            const foodId = parseInt($(this).data('food-id'));
            toggleFavorite(foodId);
        });
    }, 100);
}

        function createFoodCard(food) {
            const isFavorite = favoritesList.includes(food.id);
            const favoriteClass = isFavorite ? 'fas' : 'far';
            const favoriteColor = isFavorite ? 'color: #e74c3c;' : '';

            return `
            <div class="col-lg-4 col-md-6 fade-in">
                <div class="food-card">
                    <div class="food-image" style="position: relative;">
                        <img src="${food.image}" alt="${food.name}">
                        <button class="btn btn-sm position-absolute top-0 end-0 m-2 favorite-btn" 
                                data-food-id="${food.id}" 
                                style="background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 40px; height: 40px;">
                            <i class="${favoriteClass} fa-heart" style="${favoriteColor}"></i>
                        </button>
                        </div>
                        <div class="food-content">
                            <h5 class="food-title">${food.name}</h5>
                            <p class="food-description">${food.description}</p>
                            <div class="food-rating">
                                <div class="stars">
                                    ${generateStars(food.rating)}
                                </div>
                                <span class="rating-text">${food.rating}/5</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="details.html?id=${food.id}" class="btn btn-custom">
                                    <i class="fas fa-info-circle"></i> Learn More
                                </a>
                                <small class="text-muted">
                                    <i class="fas fa-map-marker-alt"></i> ${food.country}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let stars = '';

            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }

            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }

            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }

            return stars;
        }

        function toggleFavorite(foodId) {
            const index = favoritesList.indexOf(foodId);

            if (index > -1) {
                favoritesList.splice(index, 1);
                showNotification('Removed from favorites', 'info');
            } else {
                favoritesList.push(foodId);
                showNotification('Added to favorites!', 'success');
            }

            localStorage.setItem('streetFood_favorites', JSON.stringify(favoritesList));
            loadPopularFoods();
            console.log('Favorites updated:', favoritesList);
        }

        function showNotification(message, type = 'info') {
            const notification = $(`
                <div class="alert alert-${type === 'success' ? 'success' : 'info'} position-fixed" 
                     style="top: 80px; right: 20px; z-index: 9999; min-width: 250px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                    ${message}
                    <button type="button" class="btn-close ms-2" data-bs-dismiss="alert"></button>
                </div>
            `);

            $('body').append(notification);

            setTimeout(() => {
                notification.fadeOut(() => notification.remove());
            }, 3000);
        }

        // User preferences management
        function loadUserPreferences() {
            userPreferences = JSON.parse(localStorage.getItem('streetFood_preferences'));
            if (userPreferences.theme === 'dark') {
                document.body.classList.add('dark-theme');
            }
            console.log('User preferences loaded:', userPreferences);
        }

        function updateUserPreferences(newPrefs) {
            userPreferences = { ...userPreferences, ...newPrefs };
            localStorage.setItem('streetFood_preferences', JSON.stringify(userPreferences));
            console.log('Preferences updated:', userPreferences);
        }

        // Animation setup
        function setupAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.food-card, .feature-card').forEach(el => {
                observer.observe(el);
            });
        }

        // Search input event listeners
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('searchInput');

            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // UPDATED: Show suggestions from first character
            searchInput.addEventListener('input', function (e) {
                const value = e.target.value.toLowerCase();
                if (value.length > 0) {  // Changed from > 2 to > 0
                    showSearchSuggestions(value);
                } else {
                    hideSearchSuggestions();
                }
            });
        });

        // Additional functions
        function trackUserInteraction(action, details = {}) {
            const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session'));
            if (!sessionData.interactions) {
                sessionData.interactions = [];
            }
            sessionData.interactions.push({
                action: action,
                details: details,
                timestamp: new Date().toISOString()
            });
            sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));
        }

        async function fetchFoodData() {
            try {
                const response = await new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            foods: popularFoods,
                            totalCount: popularFoods.length,
                            lastUpdated: new Date().toISOString()
                        });
                    }, 1000);
                });
                console.log('Food data fetched successfully');
                return response;
            } catch (error) {
                console.error('Error fetching food data:', error);
                return null;
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function (e) {
            if (e.altKey && e.key === 's') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (e.altKey && e.key === 'h') {
                e.preventDefault();
                window.location.href = '#home';
            }
        });

        // Cleanup function
        window.addEventListener('beforeunload', function () {
            const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session'));
            sessionData.endTime = new Date().toISOString();
            sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));
        });

        console.log(' Street Food Explorer - Home Page Loaded Successfully!');
        console.log(' Mobile responsive design activated');
        console.log(' Storage systems initialized');
        console.log(' Animations and interactions ready');


        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        window.onload = function () {
            window.scrollTo(0, 0);
        };

    </script>
</body>

</html>
