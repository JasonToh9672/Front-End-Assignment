<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Street Food - Street Food Explorer</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>

        /* Hero */
        .global-hero {
            background: linear-gradient(rgba(0, 0, 0, .45), rgba(0, 0, 0, .45)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="%23ff6b35"/><stop offset="1" stop-color="%23f7931e"/></linearGradient></defs><rect fill="url(%23g)" width="1200" height="600"/><g opacity="0.15"><circle cx="150" cy="120" r="80" fill="%23ffffff"/><circle cx="1000" cy="420" r="140" fill="%23ffffff"/><rect x="0" y="260" width="1200" height="80" fill="%23ffffff"/></g></svg>');
            background-size: cover;
            color: #fff;
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .global-hero::before {
            content: 'üåçüçúüåÆü•üü•ô';
            position: absolute;
            top: 15%;
            left: -10%;
            font-size: 6rem;
            opacity: .08;
            transform: rotate(-10deg);
            animation: float 7s ease-in-out infinite;
        }

        .global-hero::after {
            content: 'üç¢üçïüçßüç≤ü•°';
            position: absolute;
            bottom: 15%;
            right: -10%;
            font-size: 6rem;
            opacity: .08;
            transform: rotate(10deg);
            animation: float 7s ease-in-out infinite reverse;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(-10deg)
            }

            50% {
                transform: translateY(-18px) rotate(-10deg)
            }
        }

        .global-hero h1 {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem
        }

        /* Filters */
        .filter-section {
            background: #fff;
            padding: 18px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .1);
            position: sticky;
            top: 65px;
            z-index: 100
        }

        .filter-btn {
            background: var(--light-color);
            border: 2px solid transparent;
            color: var(--dark-color);
            padding: 9px 18px;
            margin: 5px;
            border-radius: 25px;
            transition: .3s;
            cursor: pointer
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, .3)
        }

        .country-scroll {
            white-space: nowrap;
            overflow: auto;
            padding-bottom: 6px
        }

        .country-chip {
            display: inline-block;
            background: #fff;
            border: 1px solid #e5e7eb;
            padding: 8px 14px;
            margin: 4px;
            border-radius: 20px;
            cursor: pointer;
            transition: .2s
        }

        .country-chip.active,
        .country-chip:hover {
            background: var(--dark-color);
            color: #fff
        }

        /* Grid */
        .food-grid {
            padding: 80px 0;
            background: var(--light-color)
        }

        .food-item {
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .1);
            transition: .3s;
            margin-bottom: 30px;
            position: relative
        }

        .food-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, .2)
        }

        .food-image {
            height: 250px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            position: relative;
            overflow: hidden
        }

        .food-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .modal-food-img {
            height: auto;
            width: 40%; 
            object-fit: contain;
            vertical-align: middle;
        }

        .food-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, .92);
            color: var(--primary-color);
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: .8rem
        }

        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, .92);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: .3s
        }

        .favorite-btn:hover {
            background: #fff;
            transform: scale(1.1)
        }

        .food-content {
            padding: 25px
        }

        .food-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark-color)
        }

        .food-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6
        }

        .food-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px
        }

        .stars {
            color: var(--secondary-color);
            margin-right: 10px
        }

        .food-price {
            font-weight: bold;
            color: var(--accent-color)
        }

        .food-tags {
            margin-bottom: 15px
        }

        .food-tag {
            background: var(--light-color);
            color: var(--dark-color);
            padding: 3px 10px;
            border-radius: 12px;
            font-size: .8rem;
            margin-right: 5px;
            display: inline-block
        }

        .btn-custom {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: #fff;
            padding: 10px 25px;
            border-radius: 25px;
            text-decoration: none;
            transition: .3s;
            display: inline-block;
            font-weight: 500
        }

        .btn-custom:hover {
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, .4)
        }

        /* Section title */
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--dark-color);
            position: relative
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 50px
        }

        .spinner {
            border: 4px solid var(--light-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px
        }

        @keyframes spin {
            0% {
                transform: rotate(0)
            }

            100% {
                transform: rotate(360deg)
            }
        }

        /* Search result */
        .search-results {
            background: var(--accent-color);
            color: #fff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px
        }

        /* Stats */
        .stats-section {
            background: #fff;
            padding: 60px 0;
            border-top: 3px solid var(--primary-color)
        }

        .stat-card {
            text-align: center;
            padding: 30px 20px;
            border-radius: 15px;
            background: var(--light-color);
            margin-bottom: 20px;
            transition: .3s
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, .1)
        }

        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            display: block
        }

        .stat-label {
            color: var(--dark-color);
            font-weight: 500;
            margin-top: 10px
        }

        /* Footer */
        .footer {
            background: var(--dark-color);
            color: #fff;
            padding: 50px 0 30px
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px
        }

        .footer-section h4 {
            margin-bottom: 20px;
            color: var(--secondary-color)
        }

        .footer-section ul {
            list-style: none;
            padding: 0
        }

        .footer-section ul li {
            margin-bottom: 10px
        }

        .footer-section ul li a {
            color: #bdc3c7;
            text-decoration: none;
            transition: .3s
        }

        .footer-section ul li a:hover {
            color: var(--secondary-color)
        }

        .social-links a {
            color: #fff;
            font-size: 1.5rem;
            margin-right: 15px;
            transition: .3s;
            text-decoration: none
        }

        .social-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-2px)
        }

        .footer-bottom {
            border-top: 1px solid #34495e;
            padding-top: 20px;
            text-align: center;
            color: #bdc3c7
        }

        /* Notification */
        .notification {
        display: none; /* hidden by default */
        position: fixed;
        top: 20px;
        right: 20px;
        min-width: 250px;
        background: #28a745; /* default green (success) */
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        font-size: 16px;
        z-index: 2000;
        animation: fadeIn 0.5s, fadeOut 0.5s 2.5s; /* smooth in/out */
        }

        @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-20px); }
        }


        .notification.show {
            transform: translateX(0)
        }

        /* Responsive */
        @media (max-width:768px) {
            .global-hero h1 {
                font-size: 2.5rem
            }

            .food-image {
                height: 200px
            }

            .country-scroll {
                padding-top: 8px
            }
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i class="fas fa-utensils"></i> Street Food Explorer</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="malaysia.html">Malaysian Food</a></li>
                    <li class="nav-item"><a class="nav-link active" href="global.html">Global Food</a></li>
                    <li class="nav-item"><a class="nav-link" href="map.html">Food Map</a></li>
                    <li class="nav-item"><a class="nav-link" href="gallery.html">Gallery</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="global-hero">
        <div class="container">
            <div class="animate__animated animate__fadeInDown">
                <h1>Global Street Food</h1>
                <p class="lead">Taste the world‚Äîiconic bites, bold flavors, and local traditions from every corner.</p>
            </div>
        </div>
    </section>

    <!-- Filters -->
    <section class="filter-section">
        <div class="container">
            <div class="row align-items-center gy-2">
                <div class="col-lg-4">
                    <div class="d-flex align-items-center flex-wrap">
                        <span class="me-2 fw-semibold">Category:</span>
                        <button class="filter-btn active" data-category="all">All</button>
                        <button class="filter-btn" data-category="rice">Rice</button>
                        <button class="filter-btn" data-category="noodles">Noodles</button>
                        <button class="filter-btn" data-category="snacks">Snacks</button>
                        <button class="filter-btn" data-category="desserts">Desserts</button>
                        <button class="filter-btn" data-category="drinks">Drinks</button>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="country-scroll" id="countryChips">
                        <!-- chips inserted by JS -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Grid -->
    <section class="food-grid">
        <div class="container">
            <div id="searchResults" class="search-results" style="display:none;">
                <i class="fas fa-search me-2"></i>
                <span id="searchResultText"></span>
            </div>

            <div class="row" id="foodContainer">
                <div id="loadingSpinner" class="loading">
                    <div class="spinner"></div>
                    <p>Loading delicious global foods...</p>
                </div>
            </div>

            <div class="text-center mt-3">
                <button class="btn btn-outline-secondary" id="exportFavoritesBtn">
                    <i class="fas fa-file-export me-1"></i> Export My Global Favorites (Alt+G)
                </button>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section class="stats-section">
        <div class="container">
            <h2 class="section-title">Global Bites by the Numbers</h2>
            <div class="row">
                <div class="col-md-3">
                    <div class="stat-card animate__animated animate__fadeInUp">
                        <span class="stat-number counter" data-target="10">0</span>
                        <div class="stat-label">Countries Covered</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay:.3s;">
                        <span class="stat-number counter" data-target="40">0</span>
                        <div class="stat-label">Iconic Dishes</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay:.4s;">
                        <span class="stat-number counter" data-target="5">0</span>
                        <div class="stat-label">Categories</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay:.6s;">
                        <span class="stat-number">24/7</span>
                        <div class="stat-label">Street Food Spirit</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-utensils"></i> Street Food Explorer</h4>
                    <p>Your ultimate guide to discovering the world's most amazing street foods. From local Malaysian
                        favorites to global culinary treasures.</p>
                    <div class="social-links mt-3">
                        <a href="https://web.facebook.com/StreetFoodExplorer9672/" title="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="https://x.com/Street_Food9672" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.instagram.com/street_food_explorer9672/" title="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="malaysia.html">Malaysian Street Food</a></li>
                        <li><a href="global.html">Global Street Food</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="gallery.html">Photo Gallery</a></li>
                        <li><a href="map.html">Food Map</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="#" onclick="showPrivacyPolicy()">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <p><i class="fas fa-envelope"></i> info@streetfoodexplorer.com</p>
                    <p><i class="fas fa-phone"></i> +60 16-510-9672</p>
                    <p><i class="fas fa-map-marker-alt"></i> Kuala Lumpur, Malaysia</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Street Food Explorer. All rights reserved. | Developed by UCCD2323 Group Project</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
        <button type="button" class="btn-close btn-close-white ms-2" onclick="hideNotification()"></button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
        // --------------------------------
        // Data
        // --------------------------------
        let globalFoods = [];
        let favoritesGlobal = [];
        let currentCategory = 'all';
        let currentCountry = 'all';

        const foodsData = [
            // Japan
            { id: 101, name: "Takoyaki", description: "Crispy-outside, gooey-inside octopus balls drizzled with sauce and bonito flakes.", category: "snacks", price: "¬•400-800", rating: 4.7, image: "images/Takoyaki.webp", ingredients: ["Octopus", "Flour batter", "Green onion", "Pickled ginger", "Bonito flakes", "Takoyaki sauce"], tags: ["Crispy", "Street Classic"], taste: "Crispy will upcoming at the first bite, savory and umani follows up on the second.",origin: "Osaka", country: "Japan", difficulty: "Medium" },
            { id: 102, name: "Ramen", description: "Wheat noodles in rich broth topped with chashu, egg, and scallions.", category: "noodles", price: "¬•700-1200", rating: 4.8, image: "images/Ramen_Bowl.webp", ingredients: ["Wheat noodles", "Pork or chicken broth", "Chashu (braised pork)", "Soft-boiled egg", "Scallions", "Nori seaweed", "Bamboo shoots"], tags: ["Brothy", "Comfort"], taste:"The first sip delivers a rich, savory broth, followed by springy noodles and a satisfying umami taste." ,origin: "Tokyo", country: "Japan", difficulty: "Medium" },
            { id: 103, name: "Matcha Ice Cream", description: "Creamy ice cream flavored with Japanese matcha green tea.", category: "desserts", price: "¬•100-300", rating: 4.3, image: "images/matcha_ice.jpg", ingredients: ["Milk", "Heavy cream", "Sugar", "Egg yolk", "Matcha powder"], tags: ["Cold", "Creamy"], taste: "Creamy and smooth with a rich, slightly bitter matcha flavor that lingers on the palate.", origin: "Japan", country: "Japan", difficulty: "Easy" },
            { id: 104, name: "Dango", description: "Skewered rice dumplings, often served with sweet sauces or coatings.", category: "desserts", price: "¬•100-300", rating: 4.5, image: "images/dango.jpg", ingredients: ["Rice flour", "Sugar", "Hot water", "Matcha powder"], tags: ["Sweet", "Soft"], taste: "oft and chewy rice dumplings, subtly sweet, with a hint of roasted soy glaze on top.", origin: "Japan", country: "Japan", difficulty: "Easy" },
            // Thailand
            { id: 201, name: "Pad Thai", description: "Stir-fried rice noodles with tamarind, shrimp, tofu, egg, and peanuts.", category: "noodles", price: "‡∏ø40-80", rating: 4.7, image: "images/Pad_Thai.jpg", ingredients: ["Rice noodles", "Tamarind paste", "Shrimp", "Tofu", "Egg", "Bean sprouts", "Peanuts", "Green onion", "Garlic"], tags: ["Sweet-Sour", "Iconic"], taste: "Sweet, tangy, and savory with a hint of tamarind and a satisfying crunch from peanuts.", origin: "Bangkok", country: "Thailand", difficulty: "Medium" },
            { id: 202, name: "Mango Sticky Rice", description: "Sweet sticky rice with ripe mango and coconut cream.", category: "desserts", price: "‡∏ø50-100", rating: 4.6, image: "images/mango_rice.webp", ingredients: ["Glutinous rice", "Coconut cream/milk", "Sugar", "Ripe mango", "Salt", "Toasted sesame seeds"], tags: ["Sweet", "Coconut"], taste: "Sweet and creamy sticky rice paired with juicy mango, with a rich coconut flavor.", origin: "Bangkok", country: "Thailand", difficulty: "Easy" },
            { id: 203, name: "Thai Iced Tea", description: "Sweet and creamy iced tea made with strong brewed black tea, sugar, and condensed milk.", category: "drinks", price: "‡∏ø30-120", rating: 4.5, image: "images/thai_tea.jpg", ingredients: ["Black tea", "Sugar", "Condensed milk", "Fresh milk", "Ice"], tags: ["Sweet", "Refreshing"], taste: "Sweet, creamy, and fragrant with a strong black tea flavor and subtle spices.", origin: "Thailand", country: "Thailand", difficulty: "Easy" },
            { id: 204, name: "Thai Green Curry Rice", description: "Spicy and aromatic green curry served with steamed rice.", category: "rice", price: "‡∏ø50-150", rating: 4.8, image: "images/green_curry.jpg", ingredients: ["Cooked rice", "Chicken", "Green curry paste", "Coconut milk", "Vegetables", "Fish sauce", "Sugar"], tags: ["Curry", "Spicy"], taste: "Spicy and aromatic, with tender meat and vegetables in a rich coconut curry, each bite packed with flavour.", origin: "Thailand", country: "Thailand", difficulty: "Medium" },
            // Mexico
            { id: 301, name: "Tacos al Pastor", description: "Marinated pork shaved from a spit, served on corn tortillas with pineapple.", category: "snacks", price: "MXN $15-30/ea", rating: 4.8, image: "images/tacos.webp", ingredients: ["Pork", "Pineapple", "Corn tortillas", "Onion", "Cilantro", "Achiote paste", "Chili peppers"], tags: ["Spit-roast", "Zesty"], taste: "Juicy, savory pork with a hint of smokiness and sweetness, balanced by fresh pineapple and soft tortillas.", origin: "Mexico City", country: "Mexico", difficulty: "Medium" },
            { id: 302, name: "Elote", description: "Grilled corn slathered with mayo, cheese, chili, and lime.", category: "snacks", price: "MXN $10-35", rating: 4.5, image: "images/elote.jpg", ingredients: ["Corn on the cob", "Mayonnaise", "Cotija cheese", "Chili powder", "Lime"], tags: ["Grilled", "Tangy"], taste: "Sweet and smoky grilled corn, creamy with a touch of cheese, lime, and chili powder.", origin: "Mexico", country: "Mexico", difficulty: "Easy" },
            { id: 303, name: "Margarita", description: "Classic tequila-based cocktail mixed with lime juice and orange liqueur, served with a salted rim.", category: "drinks", price: "MXN $80-400", rating: 4.4, image: "images/margarita.webp", ingredients: ["Tequila", "Lime juice", "Orange liqueur", "Salt", "Ice"], tags: ["Cocktail", "Refreshing"], taste: "Crisp and tangy with a refreshing lime flavor and a subtle hint of orange liqueur.", origin: "Mexico", country: "Mexico", difficulty: "Hard" },
            { id: 304, name: "Churros", description: "Fried dough pastry coated in sugar, often served with chocolate or caramel dipping sauce.", category: "desserts", price: "MXN $10-30/ea", rating: 4.6, image: "images/churros.jpg", ingredients: ["Wheat flour", "Water", "Sugar", "Salt", "Cinnamon","Chocolate/Caramel sauce"], tags: ["Fried", "Sweet"], taste: "Crispy on the outside, soft and tender inside, coated in sugar with a hint of cinnamon.", origin: "Mexico", country: "Mexico", difficulty: "Medium" },
            // Turkey
            { id: 401, name: "D√∂ner Kebab (Rotisserie Meat)", description: "Thinly sliced seasoned meat in flatbread with veggies and sauce.", category: "snacks", price: "‚Ç∫60-120", rating: 4.6, image: "images/Doner_kebab.jpg", ingredients: ["Lamb or chicken", "Flatbread", "Tomato", "Cucumber", "Lettuce", "Onion", "Yogurt sauce", "Spices"], tags: ["Hearty", "Spit-roast"], taste: "Juicy, flavorful meat with aromatic spices, wrapped in soft bread with fresh vegetables and sauces.", origin: "Anatolia", country: "Turkey", difficulty: "Medium" },
            { id: 402, name: "Kumpir (Baked Potato)", description: "Loaded baked potato with butter, cheese, and endless toppings.", category: "snacks", price: "‚Ç∫70-140", rating: 4.4, image: "images/kumpir.webp", ingredients: ["Baked potato", "Butter", "Cheese", "Corn", "Sausage", "Olives", "Pickles", "Mayonnaise"], tags: ["Comfort", "Customizable"], taste: "Warm, fluffy potato with creamy butter and cheese, customizable with savory toppings.", origin: "Istanbul", country: "Turkey", difficulty: "Easy" },
            { id: 403, name: "K√ºnefe", description: "Warm dessert made with shredded phyllo dough and melted cheese, soaked in sweet sugar syrup.", category: "desserts", price: "‚Ç∫30-100", rating: 4.5, image: "images/kunefe.jpg", ingredients: ["Kadayif", "Unsalted cheese", "Butter", "Sugar syrup", "Pistachious"], tags: ["Sweet", "Soft"], taste: "Sweet, warm, and cheesy with crispy shredded pastry and a rich sugar syrup.", origin: "Hatay", country: "Turkey", difficulty: "Hard" },
            { id: 404, name: "√áay (Turkish Tea)", description: "Strong black tea traditionally brewed in a double teapot, served hot in small tulip-shaped glasses.", category: "drinks", price: "‚Ç∫3-15", rating: 4.3, image: "images/cay.jpg", ingredients: ["Black tea leaves", "Water", "Sugar"], tags: ["Hot", "Tea"], taste: "Strong, robust, and slightly astringent, with a comforting and warming aroma.", origin: "Turkey", country: "Turkey", difficulty: "Easy" },
            // India
            { id: 501, name: "Pani Puri", description: "Crispy puri shells filled with spiced potatoes and tangy tamarind water.", category: "snacks", price: "‚Çπ30-80", rating: 4.7, image: "images/pani_puri.jpg", ingredients: ["Puri shells", "Potatoes", "Chickpeas", "Tamarind chutney", "Mint-coriander water", "Spices"], tags: ["Tangy", "Fun-to-eat"], taste: "Crispy hollow shells filled with tangy, spicy water and savory potato or chickpea stuffing.", origin: "Northern India", country: "India", difficulty: "Medium" },
            { id: 502, name: "Masala Dosa", description: "Crisp rice-lentil crepe filled with spiced potatoes; served with chutneys.", category: "rice", price: "‚Çπ60-150", rating: 4.6, image: "images/masala.jpg", ingredients: ["Rice flour", "Lentils", "Potatoes", "Onion", "Mustard seeds", "Curry leaves", "Turmeric", "Chutneys"], tags: ["Crisp", "South Indian"], taste: "Crispy and golden on the outside, soft with spiced potato filling, accompanied by tangy chutneys.", origin: "South India", country: "India", difficulty: "Medium" },
            { id: 503, name: "Masala Chai", description: "Spiced tea brewed with black tea, milk, sugar, and a blend of aromatic spices.", category: "drinks", price: "‚Çπ10-50", rating: 4.6, image: "images/masala_chai.jpg", ingredients: ["Black tea leaves", "Milk", "Sugar", "Spices"], tags: ["Tea", "Spiced"], taste: "Warm, sweet, and spicy with aromatic notes of cinnamon, cardamom, and ginger.", origin: "Northern India", country: "India", difficulty: "Easy" },
            { id: 504, name: "Lassi", description: "Refreshing yogurt-based drink, can be sweet or salty, often flavored with fruits or spices.", category: "drinks", price: "‚Çπ20-80", rating: 4.6, image: "images/lassi.jpg", ingredients: ["Yogurt", "Milk", "Sugar/Salt", "Fruit/Spices"], tags: ["Yogurt", "Tradional"], taste: "Refreshing, creamy, and slightly tangy, with a gentle sweetness or subtle fruit flavor.", origin: "Northern India", country: "India", difficulty: "Easy" },

            // Vietnam
            { id: 601, name: "B√°nh M√¨ (Vietnamese Bread)", description: "Crispy baguette with pickles, herbs, p√¢t√©, and meats.", category: "snacks", price: "‚Ç´20k-40k", rating: 4.7, image: "images/banh_mi.jpg", ingredients: ["Baguette", "P√¢t√©", "Pickled carrots & daikon", "Cucumber", "Cilantro", "Meats (pork/chicken)"], tags: ["Crispy", "Herby"], taste: "Crispy baguette with savory fillings, fresh herbs, and a hint of pickled tang.", origin: "Saigon (Ho Chi Minh City)", country: "Vietnam", difficulty: "Medium" },
            { id: 602, name: "Ph·ªü", description: "Aromatic beef or chicken noodle soup with fresh herbs.", category: "noodles", price: "‚Ç´30k-60k", rating: 4.6, image: "images/pho.jpg", ingredients: ["Rice noodles", "Beef or chicken", "Beef/Chicken broth", "Onion", "Ginger", "Star anise", "Cilantro", "Thai basil", "Lime", "Bean sprouts"], tags: ["Herbal", "Comfort"], taste: "Aromatic, savory broth with tender noodles, fresh herbs, and a delicate balance of spices.", origin: "Hanoi", country: "Vietnam", difficulty: "Medium" },
            { id: 603, name: "C√† Ph√™ Tr·ª©ng (Egg Coffee)", description: "Rich Vietnamese coffee topped with a creamy, sweet egg yolk foam.", category: "drinks", price: "‚Ç´30k-60k", rating: 4.6, image: "images/caphe.jpg", ingredients: ["Strong vietnamese coffee", "Egg yolk", "Condensed Milk", "Sugar"], tags: ["Creamy", "Coffee"], taste: "Rich and creamy with strong coffee flavor, sweetened with frothy, velvety egg yolk, smooth in every sip.", origin: "Hanoi", country: "Vietnam", difficulty: "Easy" },
            { id: 604, name: "Ch√® S∆∞∆°ng Sa H·∫°t L·ª±u (Rainbow Dessert)", description: "Sweet Vietnamese dessert made with agar jelly, water chestnuts, and tapioca pearls in coconut milk.", category: "desserts", price: "‚Ç´15k-50k", rating: 4.6, image: "images/chesuong.jpg", ingredients: ["Agar Jelly", "Water chestnuts", "Tapioca pearls", "Coconut mlik", "Sugar"], tags: ["Sweet", "Jelly"], taste: "Sweet and refreshing with chewy jelly in the mouth, packed the tender water chestnuts, and creamy coconut milk in every taste.", origin: "South Vietnam", country: "Vietnam", difficulty: "Easy" },
            // Korea
            { id: 701, name: "Tteokbokki (Spicy Rice Cake)", description: "Chewy rice cakes simmered in spicy gochujang sauce.", category: "snacks", price: "‚Ç©3000-6000", rating: 4.5, image: "images/tteobokki.jpg", ingredients: ["Rice cakes", "Gochujang (Korean chili paste)", "Fish cakes", "Green onions", "Garlic", "Sugar", "Soy sauce"], tags: ["Spicy", "Chewy"], taste: "Chewy rice cakes first hit with a fiery, sweet-spicy gochujang sauce, leaving a lingering umami warmth.", origin: "South Korea (Seoul)", country: "South Korea", difficulty: "Medium" },
            { id: 702, name: "Hotteok (Sweet Pancake)", description: "Brown sugar‚Äìfilled griddled pancakes, crisp outside, gooey inside.", category: "desserts", price: "‚Ç©1000-2000", rating: 4.4, image: "images/hotteok.jpg", ingredients: ["Wheat flour", "Brown sugar", "Cinnamon", "Yeast", "Milk", "Oil", "Walnuts or peanuts"], tags: ["Sweet", "Warm"], taste: "Warm, pillowy dough melts in your mouth, revealing a gooey, caramelized brown sugar and nut filling.", origin: "South Korea", country: "South Korea", difficulty: "Medium" },
            { id: 703, name: "Kimchi Fried Rice", description: "Flavorful fried rice dish stir-fried with kimchi, vegetables, and sometimes meat or egg.", category: "rice", price: "‚Ç©3000-10000", rating: 4.5, image: "images/kimchi_rice.jpg", ingredients: ["Cooked rice", "Kimchi", "Vegetables", "Egg", "Meat", "Soy sauce"], tags: ["Spicy", "Warm"], taste: "Each bite bursts with spicy, tangy kimchi, perfectly mingled with savory rice and a subtle smokiness.", origin: "South Korea", country: "South Korea", difficulty: "Easy" },
            { id: 704, name: "Banana Milk", description: "Sweet, creamy milk flavored with banana, typically sold in bottles or cartons.", category: "drinks", price: "‚Ç©1000-2500", rating: 4.7, image: "images/banana_milk.jpg", ingredients: ["Banana", "Milk", "Sugar"], tags: ["Fruity", "Creamy"], taste: "Smooth, creamy milk with a gentle banana sweetness that feels comforting and refreshing sip by sip.", origin: "South Korea", country: "South Korea", difficulty: "Easy" },
            // Indonesia
            { id: 801, name: "Nasi Goreng (Indonesian Fried Rice)", description: "Smoky fried rice with kecap manis and toppings.", category: "rice", price: "Rp15k-30k", rating: 4.6, image: "images/nasi_goreng.jpg", ingredients: ["Cooked rice", "Sweet soy sauce (kecap manis)", "Garlic", "Shallots", "Egg", "Chicken or shrimp", "Green onions", "Chili"], tags: ["Smoky", "Comfort"], taste: "Fragrant fried rice with a savory, slightly sweet soy flavor, punctuated by tender pieces of meat and a hint of spice in every bite.", origin: "Indonesia", country: "Indonesia", difficulty: "Easy" },
            { id: 802, name: "Satay (Sate)", description: "Skewered grilled meats with peanut sauce, Indonesian style.", category: "snacks", price: "Rp2k-5k/stick", rating: 4.6, image: "images/satay.jpg", ingredients: ["Chicken, beef or lamb", "Skewers", "Peanut sauce", "Soy sauce", "Turmeric", "Garlic", "Shallots", "Sugar"], tags: ["Grilled", "Peanut"], taste: "Juicy, marinated meat grilled to perfection, with a smoky char and a rich, nutty peanut sauce that lingers on the palate.", origin: "Indonesia", country: "Indonesia", difficulty: "Medium" },
            { id: 803, name: "Kopi Luwak", description: "Rare and expensive coffee made from beans digested and excreted by civet cats, known for its smooth flavor.", category: "drinks", price: "Rp100k-500k", rating: 4.6, image: "images/kopi_luwak.jpg", ingredients: ["Civet-processed coffee beans", "Hot water"], tags: ["Premium", "Coffee"], taste: "Smooth and mellow coffee with a unique earthy richness, gentle bitterness, and a lingering, aromatic finish.", origin: "Indonesia", country: "Indonesia", difficulty: "Medium" },
            { id: 804, name: "Dadar Gulung", description: "Green pandan-flavored crepe roll filled with sweet coconut and palm sugar.", category: "desserts", price: "Rp2k-10k/ea", rating: 4.6, image: "images/dadar_gulung.jpg", ingredients: ["Pandan juice", "Wheat flour", "Coconut milk", "Grated coconut", "Palm sugar"], tags: ["Pandan", "Sweet"], taste: "Soft, pandan-flavored crepe wraps a sweet, fragrant coconut filling, creating a delightful balance of subtle sweetness and creamy texture.", origin: "Indonesia", country: "Indonesia", difficulty: "Medium" },
            // China
            { id: 901, name: "Jianbing", description: "Crispy egg cr√™pe with sauces, herbs, and crunchy cracker.", category: "snacks", price: "¬•6-12", rating: 4.4, image: "images/jianbing.jpg", ingredients: ["Wheat flour", "Eggs", "Scallions", "Cilantro", "Crispy cracker", "Hoisin sauce", "Chili sauce"], tags: ["Crispy", "Savory"], taste: "Crispy, golden crepe with a savory egg layer, complemented by crunchy wonton pieces, fresh herbs, and a hint of sweet and spicy sauce.", origin: "China", country: "China", difficulty: "Medium" },
            { id: 902, name: "Xiao Long Bao", description: "Soup dumplings bursting with savory broth.", category: "snacks", price: "¬•15-30", rating: 4.5, image: "images/xiaolongbao.jpg", ingredients: ["Wheat flour", "Pork", "Gelatinized broth", "Ginger", "Scallions", "Soy sauce"], tags: ["Juicy", "Delicate"], taste: "Delicate, thin-skinned dumplings burst with hot, savory broth and tender, flavorful pork filling in every bite.", origin: "China", country: "China", difficulty: "Hard" },
            { id: 903, name: "Peking Duck", description: "Crispy duck skin and rich flavor, traditionally enjoyed with thin pancakes and condiments.", category: "snacks", price: "¬•120-200", rating: 4.8, image: "images/peking_duck.jpg", ingredients: ["Duck", "Maltose syrup", "Seasonings", "Pancakes", "Scallions", "Hoisin sauce"], tags: ["Crispy", "Tradional"], taste: "Crispy skin gives way to succulent, richly flavored meat, served with soft pancakes, and sweet-savory sauce.", origin: "Beijing", country: "China", difficulty: "Hard" },
            { id: 904, name: "Zha Jiang Mian", description: "Soup dumplings bursting with savory broth.", category: "noodles", price: "¬•20-60", rating: 4.6, image: "images/zhajiangmian.webp", ingredients: ["Wheat noodles", "Minced pork", "Fermented soybean paste", "Garlic", "Ginger", "Scallions", "Vegetables","Soy sauce"], tags: ["Savory", "Traditional"], taste: "Thick wheat noodles coated in a savory, slightly salty soybean paste with minced pork, balanced by fresh julienned vegetables.", origin: "Beijing", country: "China", difficulty: "Medium" },
            // Singapore
            { id: 1001, name: "Chilli Crab", description: "Sweet‚Äìspicy crab in rich tomato-chili sauce; messy and glorious.", category: "snacks", price: "S$25-50", rating: 4.6, image: "images/chilli_crab.avif", ingredients: ["Crab", "Tomato sauce", "Chili sauce", "Garlic", "Ginger", "Eggs", "Cornstarch", "Sugar"], tags: ["Seafood", "Spicy"], taste: "Sweet, savory, and spicy sauce envelops tender crab meat, with a rich tomato and chili flavor that lingers delightfully.", origin: "Singapore", country: "Singapore", difficulty: "Hard" },
            { id: 1002, name: "Hainanese Chicken Rice", description: "Poached chicken with fragrant rice and chili-ginger sauce.", category: "rice", price: "S$3-6", rating: 4.7, image: "images/hainan_chicken.jpg", ingredients: ["Chicken", "Rice cooked in chicken fat", "Ginger", "Garlic", "Cucumber", "Chili-ginger sauce", "Soy sauce"], tags: ["Fragrant", "Comfort"], taste: "Tender poached chicken with fragrant, oily rice, subtly seasoned and accompanied by savory sauces and aromatic broth.", origin: "Singapore", country: "Singapore", difficulty: "Medium" },
            { id: 1003, name: "Xing Zhou Bee Hoon (Singapore Fried Noodles)", description: "Stir-fried rice vermicelli with curry powder, vegetables, shrimp, and sometimes char siu or egg", category: "noodles", price: "S$4-12", rating: 4.6, image: "images/xingzhou.jpg", ingredients: ["Rice vermicelli", "Curry Powder", "Meat", "Egg", "Soy sauce", "Vegetables"], tags: ["Stir-fried", "Savory"], taste: "Thin rice vermicelli stir-fried with aromatic curry, tender shrimp, and vegetables, offering a balanced sweet and savory flavor.", origin: "Singapore", country: "Singapore", difficulty: "Medium" },
            { id: 1004, name: "Mee Siam", description: "Thin rice noodles in a tangy, spicy, and slightly sweet gravy, often served with tofu, egg, and shrimp.", category: "noodles", price: "S$3-12", rating: 4.5, image: "images/meesiam.avif", ingredients: ["Rice vermicelli", "Tamarind paste", "Shrimp/Dried shrimp", "Tofu", "Eggs", "Bean sprouts", "Spices"], tags: ["Tangy", "Savory"], taste: "Tangy, spicy, and slightly sweet gravy coats delicate rice noodles, complemented by shrimp, tofu, and fresh bean sprouts.", origin: "Singapore/Johor", country: "Singapore", difficulty: "Medium" }
        ];

        // Build country list dynamically
        const countries = ['All', 'Japan', 'Thailand', 'Mexico', 'Turkey', 'India', 'Vietnam', 'South Korea', 'Indonesia', 'China', 'Singapore'];

        // --------------------------------
        // Init
        // --------------------------------
        $(document).ready(function () {
            initializeGlobalPage();
            loadFavorites();
            buildCountryChips();
            setTimeout(loadGlobalFoods, 1200); // loading animation
            setupFilterButtons();
            startCounterAnimations();
            $('#exportFavoritesBtn').on('click', exportMyGlobalFavorites);
            // Search params
            setTimeout(checkForSearchParams, 900);
        });

        function initializeGlobalPage() {
            const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session') || '{}');
            if (!sessionData.pageViews) sessionData.pageViews = [];
            sessionData.pageViews.push({ page: 'global', timestamp: new Date().toISOString() });
            sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));

            const prefs = JSON.parse(localStorage.getItem('streetFood_preferences') || '{}');
            if (!prefs.visitedPages) prefs.visitedPages = [];
            if (!prefs.visitedPages.includes('global')) {
                prefs.visitedPages.push('global');
                localStorage.setItem('streetFood_preferences', JSON.stringify(prefs));
            }
            // restore last filters
            if (prefs.lastGlobalCategory) currentCategory = prefs.lastGlobalCategory;
            if (prefs.lastGlobalCountry) currentCountry = prefs.lastGlobalCountry;

            console.log('Global page initialized');
        }

        function loadFavorites() {
            favoritesGlobal = JSON.parse(localStorage.getItem('streetFood_favorites_global') || '[]');
        }

        function loadGlobalFoods() {
            globalFoods = foodsData;
            // initial render honoring saved filters
            renderCurrentFiltersUI();
            applyFiltersAndDisplay();
            $('#loadingSpinner').fadeOut();
            console.log('Global foods loaded:', globalFoods.length);
        }

        // --------------------------------
        // UI Builders
        // --------------------------------
        function buildCountryChips() {
            const wrap = $('#countryChips');
            wrap.empty();
            countries.forEach(c => {
                const key = c.toLowerCase();
                const chip = $(`<span class="country-chip ${currentCountry === key ? 'active' : ''}" data-country="${key}">${c}</span>`);
                wrap.append(chip);
            });
            // listeners
            $('.country-chip').on('click', function () {
                $('.country-chip').removeClass('active');
                $(this).addClass('active');
                currentCountry = $(this).data('country');
                storeFilterPrefs();
                trackUserInteraction('filter_country', { country: currentCountry });
                applyFiltersAndDisplay();
            });
        }

        function renderCurrentFiltersUI() {
            // category buttons
            $('.filter-btn').removeClass('active');
            $(`.filter-btn[data-category="${currentCategory}"]`).addClass('active');
            // country chips
            $('.country-chip').removeClass('active');
            $(`.country-chip[data-country="${currentCountry}"]`).addClass('active');
        }

        // --------------------------------
        // Filtering & Display
        // --------------------------------
        function setupFilterButtons() {
            $('.filter-btn').on('click', function () {
                currentCategory = $(this).data('category');
                $('.filter-btn').removeClass('active');
                $(this).addClass('active');
                storeFilterPrefs();
                trackUserInteraction('filter_category', { category: currentCategory });
                applyFiltersAndDisplay();
            });
        }

        function storeFilterPrefs() {
            const prefs = JSON.parse(localStorage.getItem('streetFood_preferences') || '{}');
            prefs.lastGlobalCategory = currentCategory;
            prefs.lastGlobalCountry = currentCountry;
            localStorage.setItem('streetFood_preferences', JSON.stringify(prefs));
        }

        function applyFiltersAndDisplay() {
            let list = [...globalFoods];
            if (currentCategory !== 'all') {
                list = list.filter(f => f.category === currentCategory);
            }
            if (currentCountry && currentCountry !== 'all') {
                list = list.filter(f => f.country.toLowerCase() === currentCountry);
            }
            displayFoods(list);

            if (currentCategory !== 'all' || (currentCountry && currentCountry !== 'all')) {
                const catLabel = currentCategory === 'all' ? 'all categories' : currentCategory;
                const countryLabel = (!currentCountry || currentCountry === 'all') ? 'all countries' : currentCountry;
                $('#searchResultText').text(`Showing ${list.length} items ‚Ä¢ ${catLabel} ‚Ä¢ ${countryLabel}`);
                $('#searchResults').show();
            } else {
                $('#searchResults').hide();
            }
        }

        function displayFoods(foods) {
            const container = $('#foodContainer');
            container.empty();

            if (foods.length === 0) {
                container.html(`
          <div class="col-12 text-center">
            <div class="alert alert-info">
              <i class="fas fa-search"></i>
              <h5>No foods found</h5>
              <p>Try a different country or category!</p>
            </div>
          </div>
        `);
                return;
            }

            foods.forEach(food => {
                const card = createFoodCard(food);
                container.append(card);
            });

            setTimeout(() => {
                $('.favorite-btn').off('click').on('click', function (e) {
                    e.preventDefault();
                    const id = parseInt($(this).data('food-id'));
                    toggleFavorite(id);
                });
                $('.view-details').off('click').on('click', function (e) {
                    e.preventDefault();
                    const id = parseInt($(this).data('food-id'));
                    viewFoodDetails(id);
                });
            }, 80);
        }

        function createFoodCard(food) {
            const isFav = favoritesGlobal.includes(food.id);
            const favClass = isFav ? 'fas text-danger' : 'far';
            return $(`
        <div class="col-lg-4 col-md-6 food-item-wrapper" data-category="${food.category}" data-country="${food.country}">
          <div class="food-item animate__animated animate__fadeInUp">
            <div class="food-image">
              ${food.image ? `<img src="${food.image}" alt="${food.name}">` : ''}
              <div class="food-badge">${food.country}</div>
              <button class="favorite-btn" data-food-id="${food.id}">
                <i class="${favClass} fa-heart"></i>
              </button>
            </div>
            <div class="food-content">
              <h4 class="food-title">${food.name}</h4>
              <p class="food-description">${food.description}</p>
              <div class="food-tags">
                ${food.tags.map(t => `<span class="food-tag">${t}</span>`).join('')}
              </div>
              <div class="food-meta">
                <div class="food-rating">
                  <div class="stars">${generateStars(food.rating)}</div>
                  <span>${food.rating}</span>
                </div>
                <div class="food-price">${food.price}</div>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <a href="#" class="btn-custom view-details" data-food-id="${food.id}">
                  <i class="fas fa-info-circle"></i> Learn More
                </a>
                <small class="text-muted">
                  <i class="fas fa-globe"></i> ${food.origin}
                </small>
              </div>
            </div>
          </div>
        </div>
      `);
        }

        function generateStars(r) { 
            const full = Math.floor(r); const half = r % 1 !== 0; let s = ''; 
            for (let i = 0; i < full; i++) s += '<i class="fas fa-star"></i>'; 
            if (half) s += '<i class="fas fa-star-half-alt"></i>'; 
            const empty = 5 - Math.ceil(r); 
            for (let i = 0; i < empty; i++) s += '<i class="far fa-star"></i>'; 
        return s; }

        // --------------------------------
        // Favorites, Details, Share
        // --------------------------------
        function toggleFavorite(id) {
            const idx = favoritesGlobal.indexOf(id);
            if (idx > -1) {
                favoritesGlobal.splice(idx, 1);
                showNotification('Removed from favorites', 'info');
            } else {
                favoritesGlobal.push(id);
                showNotification('Added to favorites', 'success');
            }
            localStorage.setItem('streetFood_favorites_global', JSON.stringify(favoritesGlobal));
            applyFiltersAndDisplay();
            trackUserInteraction('toggle_favorite_global', { foodId: id, action: idx > -1 ? 'remove' : 'add' });
        }

        function viewFoodDetails(id) {
            const food = globalFoods.find(f => f.id === id);
            if (!food) return;
            // save for details page
            sessionStorage.setItem('selectedFood', JSON.stringify(food));
            // modal preview
            showFoodModal(food);
            // track
            trackUserInteraction('view_details_global', { foodId: id, foodName: food.name });
        }

        function showFoodModal(food) {
            const modal = `
        <div class="modal fade" id="foodModal" tabindex="-1" aria-labelledby="foodModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header" style="background:linear-gradient(135deg,var(--primary-color),var(--secondary-color)); color:#fff;">
                <h5 class="modal-title" id="foodModalLabel"><span style="font-size:2rem; margin-right:10px;">${food.image ? `<img src="${food.image}" alt="${food.name}" class="modal-food-img">` : ''}</span>${food.name}</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-md-8">
                    <h6>Description</h6>
                    <p>${food.description}</p>
                    <h6>Origin & Difficulty</h6>
                    <p><strong>Country:</strong> ${food.country}<br><strong>From:</strong> ${food.origin}<br><strong>Diffculty to Make: </strong>${food.difficulty}</p>
                    <h6>Fun Facts</h6>
                    <ul>
                      <li>Often served fresh from bustling street stalls.</li>
                      <li>Represents local flavors and cooking traditions.</li>
                      <li>Perfect for first-time visitors exploring the cuisine.</li>
                    </ul>
                  </div>
                  <div class="col-md-4">
                    <div class="bg-light p-3 rounded">
                      <h6>Quick Info</h6>
                      <p><strong>Price Range:</strong><br>${food.price}</p>
                      <p><strong>Rating:</strong><br><span class="stars">${generateStars(food.rating)}</span> ${food.rating}/5</p>
                      <p><strong>Category:</strong><br><span class="badge bg-primary">${food.category}</span></p>
                      <p><strong>Tags:</strong><br>${food.tags.map(t => `<span class="badge bg-secondary me-1">${t}</span>`).join('')}</p>
                    </div>
                    <div class="mt-3 d-grid gap-2">
                      <button class="btn btn-custom" onclick="shareFood(${food.id})"><i class="fas fa-share"></i> Share</button>
                      <a class="btn btn-outline-dark" href="details.html"><i class="fas fa-up-right-from-square"></i> Open Details Page</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-custom" onclick="addToFavorites(${food.id})" data-bs-dismiss="modal"><i class="fas fa-heart"></i> Add to Favorites</button>
              </div>
            </div>
          </div>
        </div>
      `;
            $('#foodModal').remove();
            $('body').append(modal);
            $('#foodModal').modal('show');
            $('#foodModal').on('hidden.bs.modal', function () { $(this).remove(); });
        }

        function shareFood(id) {
            const food = globalFoods.find(f => f.id === id);
            if (!food) return;
            const url = window.location.href + `?food=${id}`;
            if (navigator.share) {
                navigator.share({ title: `Check out ${food.name}!`, text: food.description, url });
            } else {
                const txt = `Check out ${food.name}! ${food.description} - ${url}`;
                navigator.clipboard.writeText(txt).then(() => showNotification('Link copied to clipboard!', 'success'));
            }
            trackUserInteraction('share_food_global', { foodId: id, foodName: food.name });
        }

        function addToFavorites(id) {
            if (!favoritesGlobal.includes(id)) {
                favoritesGlobal.push(id);
                localStorage.setItem('streetFood_favorites_global', JSON.stringify(favoritesGlobal));
                showNotification('Added to favorites!', 'success');
            } else {
                showNotification('Already in favorites!', 'info');
            }
        }

        // --------------------------------
        // Search / URL params
        // --------------------------------
        function checkForSearchParams() {
            const p = new URLSearchParams(window.location.search);
            const searchTerm = p.get('search');
            const foodId = p.get('food');

            if (searchTerm) { performSearch(searchTerm); }
            if (foodId) {
                setTimeout(() => {
                    const el = $(`.food-item-wrapper .view-details[data-food-id="${foodId}"]`).closest('.food-item');
                    if (el.length) {
                        el.addClass('highlight-food');
                        $('html, body').animate({ scrollTop: el.offset().top - 100 }, 1000);
                    }
                }, 1600);
            }
        }

        function performSearch(term) {
            const results = globalFoods.filter(f =>
                f.name.toLowerCase().includes(term.toLowerCase()) ||
                f.description.toLowerCase().includes(term.toLowerCase()) ||
                f.tags.some(t => t.toLowerCase().includes(term.toLowerCase())) ||
                f.country.toLowerCase().includes(term.toLowerCase())
            );
            displayFoods(results);
            $('#searchResultText').text(`${results.length} result(s) for "${term}"`);
            $('#searchResults').show();
            trackUserInteraction('search_global', { term, results: results.length });
        }

        // --------------------------------
        // Notification, Counters, Export
        // --------------------------------
        function showNotification(message, type = "success") {
            const notif = document.getElementById("notification");
            const notifText = document.getElementById("notificationText");

            // Change background color depending on type
            if (type === "success") {
                notif.style.background = "#28a745"; // green
            } else if (type === "error") {
                notif.style.background = "#dc3545"; // red
            } else if (type === "info") {
                notif.style.background = "#0d6efd"; // blue
            } else {
                notif.style.background = "#6c757d"; // gray
            }

            notifText.textContent = message;
            notif.style.display = "block";

            // Auto-hide after 3 seconds
            setTimeout(hideNotification, 3000);
        }

        function hideNotification() {
            document.getElementById("notification").style.display = "none";
        }


        function startCounterAnimations() {
            const counters = document.querySelectorAll('.counter');
            const obs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) { animateCounter(e.target); obs.unobserve(e.target); }
                });
            });
            counters.forEach(c => obs.observe(c));
        }
        function animateCounter(el) {
            const target = parseInt(el.getAttribute('data-target')); const inc = target / 50; let cur = 0;
            const timer = setInterval(() => {
                cur += inc;
                if (cur >= target) { el.textContent = target; clearInterval(timer); }
                else { el.textContent = Math.ceil(cur); }
            }, 40);
        }

        function exportMyGlobalFavorites() {
            const favFoods = globalFoods.filter(f => favoritesGlobal.includes(f.id));
            if (favFoods.length === 0) { showNotification('No favorites to export!', 'warning'); return; }
            const dataStr = JSON.stringify({ exportDate: new Date().toISOString(), totalFavorites: favFoods.length, foods: favFoods }, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'my_global_favorites.json'; a.click();
            URL.revokeObjectURL(url);
            showNotification(`Exported ${favFoods.length} favorite foods!`, 'success');
            trackUserInteraction('export_favorites_global', { count: favFoods.length });
        }
        // Alt+G shortcut
        document.addEventListener('keydown', e => {
            if (e.altKey && e.key.toLowerCase() === 'g') { e.preventDefault(); exportMyGlobalFavorites(); }
        });

        // --------------------------------
        // Privacy modal (reuse)
        // --------------------------------
        function showPrivacyPolicy() {
            const modal = `
        <div class="modal fade" id="privacyModal" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Privacy Policy</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <h6>Information We Collect</h6>
                <p>We collect preferences like visited pages, favorites, and filters to personalize your experience.</p>
                <h6>How We Use Information</h6>
                <p>Your data helps us improve recommendations and remember your choices.</p>
                <h6>Data Protection</h6>
                <p>We use local/session storage in your browser; clear it anytime in your settings.</p>
              </div>
            </div>
          </div>
        </div>`;
            $('body').append(modal);
            $('#privacyModal').modal('show');
            $('#privacyModal').on('hidden.bs.modal', function () { $(this).remove(); });
        }

        // --------------------------------
        // Smooth scroll & basic AOS
        // --------------------------------
        $('a[href^="#"]').on('click', function (e) {
            e.preventDefault();
            const t = $($(this).attr('href'));
            if (t.length) { $('html, body').animate({ scrollTop: t.offset().top - 100 }, 800); }
        });
        const animateOnScroll = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('animate__animated', 'animate__fadeInUp'); } });
        });
        // will auto-apply when cards render

        // Track interactions
        function trackUserInteraction(action, details = {}) {
            const sessionData = JSON.parse(sessionStorage.getItem('streetFood_session') || '{}');
            if (!sessionData.interactions) sessionData.interactions = [];
            sessionData.interactions.push({ action, page: 'global', details, timestamp: new Date().toISOString() });
            sessionStorage.setItem('streetFood_session', JSON.stringify(sessionData));
        }

        // highlight style for search-linked items
        $('<style>').prop('type', 'text/css').html(`
      .highlight-food{
        animation: highlightPulse 2s ease-in-out 3;
        border:3px solid var(--accent-color) !important;
      }
      @keyframes highlightPulse{
        0%,100%{transform:scale(1); box-shadow:0 10px 30px rgba(0,0,0,.1)}
        50%{transform:scale(1.05); box-shadow:0 20px 40px rgba(46,204,113,.3)}
      }
    `).appendTo('head');

        console.log('üåç Global Street Food Page Loaded!');
    </script>
</body>

</html>